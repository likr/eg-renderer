<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Form Demo | EgRenderer Example</title>
    <script type="module">
      import "../../eg-renderer.js";
      egRenderer("../../eg-renderer.wasm");
    </script>
  </head>
  <body>
    <div>
      <a href="../../">back</a>
      <h1>Form Demo</h1>
    </div>
    <div>
      <button id="transition">transition</button>
    </div>
    <div>
      <eg-renderer
        transition-duration="1000"
        width="600"
        height="400"
        src="data.json"
        node-id-property="id"
        node-visibility-property="visibility1"
        link-type-property="type1"
        link-visibility-property="visibility1"
        default-node-stroke-width="0"
        default-node-label-fill-color="#fff"
        default-link-stroke-color="#ccc"
        default-link-stroke-width="3"
        no-auto-centering
      >
      </eg-renderer>
    </div>
    <script>
      customElements.whenDefined("eg-renderer").then(() => {
        const renderer = document.querySelector("eg-renderer");

        let flag = false;
        document.querySelector("#transition").addEventListener("click", () => {
          renderer.nodeVisibilityProperty = flag
            ? "visibility1"
            : "visibility2";
          renderer.linkVisibilityProperty = flag
            ? "visibility1"
            : "visibility2";
          renderer.linkTypeProperty = flag ? "type1" : "type2";
          flag = !flag;
        });

        renderer.addEventListener("nodemove", (event) => {
          const { id, x, y } = event.detail;
          const node = renderer.data.nodes.find((node) => node.id === id);
          node.x = x;
          node.y = y;
        });
      });
    </script>
  </body>
</html>
